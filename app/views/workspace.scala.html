@(listproj:List[(EzbProject,Ezoombook)], listpro:List[(EzbProject,Ezoombook)], listezb:List[Ezoombook], listmyb:List[Book], userGroups:List[Group], colabGroups:List[Group], groupForm:Form[(String, String)])(implicit session:Session, context:Context)

@import utils.EzbHelpers._
@import helper._
@import ezbhelper._
@import utils.MD5Util
@import utils.DateFormatter._

@scripts = {
<script type="text/javascript">//<![CDATA[
    $(document).ready(function(){
    $('#btnAddAuth').click(function () {
    cloner('authors');
    });
    $('#btnAddLang').click(function () {
    cloner('languages');
    });
    $('#btnAddPublshr').click(function () {
    cloner('publishers');
    });
    $('#btnAddPubDate').click(function () {
    cloner('published_dates');
    });
    $('#btnAddTag').click(function () {
    cloner('tags');
    });
    });

    function toggle(divtag){
    if(document.getElementById(divtag).style.display=="none"){
    document.getElementById(divtag).style.display="block";
    } else {
    document.getElementById(divtag).style.display="none";
    }
    }
    //]]>
</script>
}

@main("Welcome to your Workspace", scripts){

<center><h1>@session.get("userName")'s Workspace</h1></center>

<div class="row">
<div class="span3">
    @defining(MD5Util.md5Hex(context.user.map(u => u.email).getOrElse("ezoomwiki.com"))){icon =>
    <img src="https://www.gravatar.com/avatar/@icon?s=250&amp;d=identicon">
    }
    </br>
    <table class="table table-striped">
        <tbody>
        <tr>
            <th><i class="icon-envelope"></i>&nbsp;Message</th>
            <th>author</th>
            <th>date</th>
            <th></th>
        </tr>

        </tbody>
    </table>
</div>


<div class="span9">

    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab1" data-toggle="tab"><i class="icon-edit"></i>&nbsp;Contribution</a></li>
        <li><a href="#tab2" data-toggle="tab"><i class="icon-globe"></i>&nbsp;Community</a></li>
        <li><a href="#tab3" data-toggle="tab"><i class="icon-book"></i>&nbsp;Books</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="tab1">  <!-- Projects Tab -->
            <h2>Your Projects</h2>

            <table class="table table-striped">
                <tbody>
                <tr>
                    <th>Project</th>

                    <th>eZoomBook</th>
                    <th>Creation Date</th>
                </tr>
                @for(g<-listproj) {

                <tr>
                    <td>@g._1.projectName</td>
                    <td>@g._2.ezoombook_title</td>
                    <td>@dateFormat(g._1.projectCreationDate, "dd-MM-yyyy")</td>
                </tr>
                }
                @for(g<-listpro) {

                <tr>
                    <td>@g._1.projectName</td>
                    <td>@g._2.ezoombook_title</td>
                    <td>@dateFormat(g._1.projectCreationDate, "dd-MM-yyyy")</td>
                </tr>
                }
                </tbody>
            </table>
            </br>
            <h2>Your eZoomBooks</h2>

            <table class="table table-striped">
                <tbody>
                <tr>
                    <th>Name</th>

                    <th></th>
                </tr>
                @for(g<-listezb){
                <tr>
                    <td><a href="/read/@g.ezoombook_id">@g.ezoombook_title</a></td>
                    <td>
                        <a href="/ezlayer/edit/@g.ezoombook_id" class="btn" =>Edit</a>
                        <a href="@routes.EzoomBooks.ezoomBookDelete(g.ezoombook_id.toString)" class="btn" =>Delete</a>
                    </td>
                </tr>
                }
                </tbody>
            </table>

        </div>
        <div class="tab-pane" id="tab2"> <!-- Friends Tab -->
            <h2>My friends</h2>
            <p><a>Add a friend</a></p>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <th>Name</th>
                    <th>Groups</th>
                    <th>Favorite books</th>
                    <th></th>
                </tr>
                <tr>
                    <td>Scot</td>
                    <td>Dantes group</td>
                    <td>Desperate Remedies, Alice in Wonderland</td>
                </tr>
                </tbody>
            </table>

@** <!--
            <h4>@inputText(groupForm(""))</h4>
            <dl>
                <li onClick="toggle('seeuser')"><h3>Add a friend

                </h3></li>

                <div id="seeuser" style="display:none">
                    <table class="table table-striped">
                        <tbody>
                        <tr>
                            <th>Name</th>
                            <th>Groups</th>
                            <th>Favorite books</th>
                            <th></th>
                        </tr>

                        </tbody>
                    </table>
                </div>

            </dl>

            <h1 style="float:left">Create a group</h1>
            </br></br></br></br>

            @form(routes.Community.newGroup){
            <h4>@inputText(groupForm("groupName"),'_label->"Name of the group")</h4>

            @hidden(groupForm("ownerId"), 'value -> session.get("userId"))
            <input type="submit" value="Create a group">
            }
            </br>
--> **@

            <h2>Your groups</h2>

            <p><a>Add a group</a></p>
            <table class="table table-striped">
                <tbody>
                <tr>
                    <th>Title</th>
                    <th>You own</th>
                    <th></th>
                </tr>
                @for(g<-userGroups){
                <tr>
                    <td>@g.name</td>
                    <td>X</td>
                    <td>
                        @form(routes.Community.group(g.id.toString())){
                        <input type="submit" value="choose this group"></td>
                    }
                </tr>
                }

                @for(g<-colabGroups){
                <tr>
                    <td>@g.name</td>
                    <td></td>
                    <td>
                        @form(routes.Community.group(g.id.toString())){
                        <input type="submit" value="choose this group"></td>
                    }
                </tr>
                }
                </tbody>
            </table>
        </div>
        <div class="tab-pane" id="tab3"> <!-- Books Tab -->

            <h2>Your Books</h2>

            <table class="table table-striped">
                <tbody>
                <tr>
                    <th>Name</th>
                    <th></th>
                </tr>
                @for(g<-listmyb){
                <tr>
                    <td><a href="/books/@g.bookId">@g.bookTitle</a></td>
                    <td><a href="/bookreedit/@g.bookId" class="btn" =>Edit</a></td>

                </tr>
                }
                </tbody>
            </table>

            <h2>Your Reading Lists</h2>

            <table class="table table-striped">
                <tbody>
                <tr>
                    <th>Books</th>
                    <th></th>
                </tr>

                </tbody>
            </table>

            <h2>Your Favorite Books</h2>

            <table class="table table-striped">
                <tbody>
                <tr>
                    <th>Book</th>
                    <th></th>
                </tr>

                </tbody>
            </table>

        </div>
    </div>

</div>
</div>

}
